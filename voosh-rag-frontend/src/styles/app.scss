:root{
  --bg:#070a0f; --fg:#e8edf5; --muted:#aab3c2;
  --brand:#7aa2ff; --brand2:#8b5cf6; --brand3:#20e3b2;
  --bubble-user:#111a28; --bubble-assistant:rgba(255,255,255,.06);
  --ring:rgba(125,153,255,.25); --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12);
}

*{box-sizing:border-box} html,body,#root{height:100%}
body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--fg);background:var(--bg)}

/* ======= AURORA BACKDROP ======= */
.bg{position:fixed;inset:0;pointer-events:none;overflow:hidden}
.aurora{filter:blur(40px) saturate(120%); opacity:.9}
.aurora span{
  position:absolute; width:70vmax; height:70vmax; border-radius:50%;
  background:radial-gradient(closest-side, rgba(122,162,255,.18), transparent 70%);
  mix-blend-mode:screen; animation:drift 28s infinite linear;
}
.aurora .a1{left:-20vmax;top:-10vmax}
.aurora .a2{right:-25vmax;top:-15vmax;background:radial-gradient(closest-side, rgba(139,92,246,.16),transparent 70%);animation-duration:32s}
.aurora .a3{left:10vmax;bottom:-30vmax;background:radial-gradient(closest-side, rgba(32,227,178,.12),transparent 70%);animation-duration:36s}
@keyframes drift{0%{transform:translate3d(0,0,0)}50%{transform:translate3d(10%,6%,0)}100%{transform:translate3d(0,0,0)}}

/* ======= HEADER ======= */
.header{
  position:sticky;top:0;z-index:5;
  display:flex;align-items:center;justify-content:space-between;
  padding:14px clamp(12px,4vw,28px);
  background:linear-gradient(to bottom, rgba(7,9,12,.85), rgba(7,9,12,.45));
  backdrop-filter: blur(8px) saturate(120%); border-bottom:1px solid var(--border);
}
.title{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.2px}
.logo{display:inline-flex;width:28px;height:28px;align-items:center;justify-content:center;
  background:conic-gradient(from 200deg, var(--brand), var(--brand2), var(--brand3));
  border-radius:9px; box-shadow:0 8px 28px rgba(123,97,255,.35)}
.badge{font-size:12px;color:var(--muted);border:1px solid var(--border);
  padding:4px 8px;border-radius:8px}
.ghost{background:transparent;border:1px solid var(--border);color:var(--fg);
  padding:8px 12px;border-radius:10px;cursor:pointer;transition:.2s}
.ghost:hover:not(:disabled){border-color:var(--brand);box-shadow:0 0 0 3px var(--ring)}
.ghost:disabled{opacity:.5;cursor:not-allowed}

/* ======= LAYOUT ======= */
.chat{
  max-width:980px;margin:0 auto;padding:20px clamp(12px,4vw,28px) 120px;
  min-height:calc(100dvh - 180px)
}
.empty{margin-top:16vh;text-align:center;color:var(--muted)}
.empty h1{color:var(--fg);font-size:clamp(22px,3vw,30px);margin:0 0 8px}
.suggests{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
.chip{background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--fg);
  padding:6px 10px;border-radius:999px;font-size:14px;cursor:pointer;user-select:none}
.chip:hover{border-color:var(--brand);box-shadow:0 0 0 3px var(--ring)}

/* ======= MESSAGES ======= */
.msg{display:flex;gap:10px;margin:14px 0}
.avatar{flex:0 0 32px;height:32px;border-radius:50%;
  background:linear-gradient(135deg, var(--brand), var(--brand2));
  display:flex;align-items:center;justify-content:center;font-size:14px}
.msg.user{justify-content:flex-end}
.msg.user .avatar{background:linear-gradient(135deg,#1e2a40,#2a3b57)}
.bubble{
  max-width:min(850px,90%);line-height:1.65;padding:14px 16px;border-radius:18px;
  border:1px solid var(--border);box-shadow:0 10px 24px rgba(0,0,0,.25);animation:pop .18s ease-out both
}
.msg.user .bubble{background:var(--bubble-user);border-top-right-radius:6px}
.msg.assistant .bubble{background:var(--bubble-assistant);backdrop-filter:blur(8px);border-top-left-radius:6px}
.bubble p{margin:0 0 10px} .bubble p:last-child{margin-bottom:0}
@keyframes pop{from{transform:translateY(4px) scale(.98);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}

/* ======= SOURCES GRID ======= */
.sources{margin-top:12px;display:grid;gap:10px}
@media(min-width:640px){.sources{grid-template-columns:repeat(2,minmax(0,1fr))}}
.card{
  display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--fg);
  padding:10px 12px;border-radius:12px;border:1px dashed rgba(255,255,255,.2);
  background:rgba(255,255,255,.04);transition:.12s ease;
}
.card:hover{border-style:solid;border-color:var(--brand);transform:translateY(-1px)}
.fav{width:16px;height:16px;border-radius:4px}
.domain{color:var(--muted);font-size:13px}
.titleLine{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.arrow{margin-left:auto;opacity:.6}

/* typing dots */
.typing{display:inline-flex;gap:6px;align-items:center}
.typing span{width:7px;height:7px;border-radius:50%;background:var(--muted);animation:bounce 1.2s infinite ease-in-out}
.typing span:nth-child(2){animation-delay:.15s} .typing span:nth-child(3){animation-delay:.3s}
@keyframes bounce{0%,80%,100%{transform:translateY(0);opacity:.5}40%{transform:translateY(-5px);opacity:1}}

/* ======= COMPOSER ======= */
.composer{
  position:sticky;bottom:0;z-index:9;padding:16px clamp(12px,4vw,28px) 22px;
  border-top:1px solid var(--border);
  background:linear-gradient(to top, rgba(7,9,12,.95), rgba(7,9,12,.6));backdrop-filter:blur(10px)
}
.inputWrap{position:relative;max-width:980px;margin:0 auto;display:flex;align-items:flex-end;gap:10px;
  background:var(--card);border:1px solid var(--border);border-radius:16px;padding:8px 8px 8px 14px}
.inputWrap.disabled{opacity:.75}
textarea{flex:1;resize:none;background:transparent;border:none;outline:none;color:var(--fg);
  font-size:16px;line-height:1.5;max-height:160px;padding:8px 0}
.send{width:44px;height:44px;border-radius:12px;border:1px solid var(--border);
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:white;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;
  box-shadow:0 10px 24px rgba(123,97,255,.35);transition:transform .06s ease}
.send:disabled{filter:grayscale(.6);opacity:.7;cursor:not-allowed;box-shadow:none}
.send:active{transform:translateY(1px) scale(.99)}
.error{max-width:980px;margin:10px auto 0;color:#ffb4b4}

/* scroll-to-bottom */
.fab{position:fixed;right:18px;bottom:120px;z-index:20;width:40px;height:40px;border-radius:999px;
  border:1px solid var(--border);background:var(--bubble-user);color:var(--fg);
  display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.15s}
.fab:hover{border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}

@media(max-width:640px){.sources{grid-template-columns:1fr}.chat{padding-bottom:108px}}
